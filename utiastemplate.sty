%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% UTIAS Template Preamble
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\ProvidesPackage{utiastemplate}

% Some handy commands
\newcommand{\norm}[1]{\left\Vert#1\right\Vert}
\newcommand{\abs}[1]{\left\vert#1\right\vert}
\newcommand{\set}[1]{\left\{#1\right\}}
\newcommand{\Real}{\mathbb R}
\newcommand{\Complex}{\mathbb C}
\newcommand{\eps}{\varepsilon}
\newcommand{\To}{\longrightarrow}
\newcommand{\Ker}{\textup{Ker}}
\newcommand{\Img}{\textup{Img}}
\newcommand{\diag}{\textup{diag}}
\newcommand{\circulant}{\textup{circ}}

% checks and Xs
\newcommand{\yes}{\ding{51}}
\newcommand{\no}{\ding{55}}

% Tim's Math Defs
\newcommand{\bcf}{\;\mbox{\boldmath ${\cal F}$\unboldmath}}
\def\Vec#1{\!\!\hbox{$#1$\kern-0.38em\lower0.85em\hbox{$\vec{}\,$}}\,}%
\newcommand{\bbm}{\begin{bmatrix}}
\newcommand{\ebm}{\end{bmatrix}}
\DeclareMathAlphabet{\mbf}{OT1}{ptm}{b}{n}
\newcommand{\mbs}[1]{{\boldsymbol{#1}}}
\def\ep{\epsilon}
\def\la{\lambda}
\def\om{\omega}
\newcommand{\qc}[1]{{#1}^+}
\newcommand{\qo}[1]{{#1}^\oplus}
\newcommand{\qi}[1]{{#1}^{\scalebox{0.5}{$-1$}}}

% Math Defs
\def\N{\ensuremath{\mathcal{N}}}
\newcommand{\normpdf}[2]{\mathcal{N}(#1|\mu_#2,\sigma_#2^2)}
\newcommand{\gaussian}[2]{\frac{1}{\sigma_#2\sqrt{2\pi}}e^{-\frac{(#1-\mu_#2)^2}{2\sigma_#2^2}}}
\newcommand{\pd}[2]{\frac{\partial #1}{\partial #2}}
\newcommand{\ds}{\displaystyle}

% Some new environments
\newtheorem{preexample}{\sf\bfseries Example}
\newenvironment{example}
{\begin{preexample}\upshape\hspace{-5.9pt}{\sf\bfseries :}}
{~\hfill $\blacktriangleleft$ \end{preexample}}

\newtheorem{prethm}{\sf\bfseries Theorem}
\newenvironment{thm}[1]
{\begin{prethm}\hspace{-5.9pt}{\sf\bfseries #1:}}
{\end{prethm}}

\newtheorem{prelem}{\sf\bfseries Lemma}
\newenvironment{lem}[1]
{\begin{prelem}\hspace{-5.9pt}{\sf\bfseries #1:}}
{\end{prelem}}

\newtheorem{preprop}{\sf\bfseries Proposition}
\newenvironment{prop}[1]
{\begin{preprop}\hspace{-5.9pt}{\sf\bfseries #1:}}
{\end{preprop}}

\newenvironment{prf}[1]
{\indent\textit{Proof#1:}}
{~\hfill $\blacksquare$\\}

% Fix some error reporting
\vfuzz2pt % Don't report over-full v-boxes if over-edge is small
\hfuzz2pt % Don't report over-full h-boxes if over-edge is small

% Set the page size
\setlength{\headheight}{0.6in}

% these will interfere with the geometry pkg
% \addtolength{\hoffset}{-0.5in} \addtolength{\voffset}{-0.75in}
% \setlength{\textwidth}{6.5in} \setlength{\textheight}{8.9in}
% \setlength{\headsep}{0.4in}

\setlength{\footskip}{20pt}
\setlength{\fboxsep}{12pt}

% Set the paragraph skip
\setlength{\parskip}{3pt}
\setlength{\parindent}{0pt}

% Dates for headers and footers:
\date{\usdate \displaydate{date}}
\yyyymmdddate
\renewcommand{\dateseparator}{-}

% PDF hyperlinks setup
\hypersetup{%
pdftitle={\UTIASdocument: \UTIAStitle},
pdfauthor={\UTIASauthor},
pdfkeywords={},
pdfsubject={\UTIASprogram},
pdfstartview={},
citecolor=Violet,
urlcolor=Cerulean,
linkcolor=BlueViolet,
linktoc=number
}%
\urlstyle{same}
% Define some hyphenation
\hyphenation{aero-space} \hyphenation{auton-omous}

% Fix the footnotes location
\makeFNbottom \makeFNbelow

% Defining the title

\title{\sf\bfseries\UTIAStitle\\
\vspace{14pt}\sf\Large\UTIASdocument
}
\author{\large\sf\UTIASauthor\\
\normalsize\texttt\UTIASemail\\
\sf\normalsize\UTIASreviewer%
}
% ---------------------------------------------------------------
% \section font sizes

\makeatletter
\renewcommand{\section}{\@startsection{section}{1}{0ex}%
{-6ex plus -1ex minus -0.2ex}%
{1ex plus 0.2ex}%
{\sf\LARGE\bfseries}}

\renewcommand{\subsection}{\@startsection{subsection}{2}{0ex}%
{-5ex plus -1ex minus -0.2ex}%
{1ex plus 0.2ex}%
{\sf\Large\bfseries}}

\renewcommand{\subsubsection}{\@startsection{subsubsection}{3}{0ex}%
{-4ex plus -1ex minus -0.2ex}%
{1ex plus 0.2ex}%
{\sf\large\bfseries}}

\let\OLDthebibliography\thebibliography
\renewcommand\thebibliography[1]{
\OLDthebibliography{#1}
\setlength{\parskip}{0pt}
\setlength{\itemsep}{0pt plus 0.3ex}
}

% ---------------------------------------------------------------
% \paragraph numbering

\makeatletter
\renewcommand{\paragraph}{\@startsection{paragraph}{4}{0ex}%
{-3ex plus -1ex minus -0.2ex}%
{1ex plus 0.2ex}%
{\sf\normalsize\bfseries}}
\makeatother

\stepcounter{secnumdepth}
\stepcounter{tocdepth}

% ---------------------------------------------------------------

% Stuff that used to be after \begin{document}
% Define the basic page style
\fancypagestyle{plain}{%
\fancyhf{}%
\fancyfoot[C]{}%
\fancyhead[R]{\begin{tabular}[b]{r}\small\sf \UTIASdocument\\
\small\sf\UTIASrevision\ifx\UTIASrevision\empty\fi\end{tabular}}%
\fancyhead[L]{\includegraphics[height=0.8in]%
{figs/utias.eps} }%
\renewcommand{\headrulewidth}{0pt}
\renewcommand{\footrulewidth}{0pt}}

% Set the page style for the document
\pagestyle{fancy}

% Set the section labeling font
\allsectionsfont{\sf\bfseries}

% Set the caption labeling font
\renewcommand{\captionlabelfont}{\small\sf\bfseries}
\renewcommand{\captionfont}{\small\sf}
\renewcommand{\belowcaptionskip}{12pt}

% ---------------------------------------------------------------

% Set the page headers and footers.
\lhead{\begin{tabular}[b]{l}\sc{University of Toronto} \\ \sc{Institute for Aerospace Studies}\\ \mbox{}\end{tabular}}
\rhead{ \begin{tabular}[b]{r}\small\sf \UTIASdocument\\
\small\sf\UTIASshortauthor\\
\small\sf\displaydate{date}\\
\small\sf\UTIASrevision\ifx\UTIASrevision\empty\fi%
\end{tabular}}
\chead{}
\lfoot{}
\cfoot{\thepage}
\rfoot{}

\renewcommand{\headrulewidth}{0pt}
\renewcommand{\footrulewidth}{0pt}
